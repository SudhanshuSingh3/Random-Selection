<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random-Selection</title>
  </head>
  <body>
    <h2>The number of Avilable Users are: <span id="count"></span></h2>
    <div>
      <button onclick="randomSearch()">Click here to View User</button>
      <h3><a href="show.html">Click here to show user</a></h3>
    </div>
    <h2><span id="name"></span></h2>
    <h2><span id="age"></span></h2>

    <h2></h2>
  </body>
  <script>
    let users = [
      { name: "John", age: 22 },
      { name: "Peter", age: 20 },
      { name: "Mark", age: 23 },
      { name: "John11", age: 22 },
      { name: "Peter11", age: 20 },
      { name: "Mark11", age: 23 },
      { name: "John22", age: 22 },
      { name: "Peter22", age: 20 },
      { name: "Mark22", age: 23 },
    ];

    let temp = JSON.parse(JSON.stringify(users));
    function init() {
      if (localStorage.getItem("count") === null) {
        var count = users.length;
        localStorage.setItem("count", count);
      } else {
        document.getElementById("count").innerHTML = parseInt(
          localStorage.getItem("count")
        );
      }
    }
    init();

    document.getElementById("count").innerHTML = parseInt(
      localStorage.getItem("count")
    );

    let tempList = [];
    let firstList = [];

    function randomSearch() {
      if (parseInt(localStorage.getItem("count")) > 0) {
        let randomNumber = Math.floor(Math.random() * temp.length);
        console.log(randomNumber);
        document.getElementById("name").innerHTML =
          "Name of the user is " + temp[randomNumber].name;
        document.getElementById("age").innerHTML =
          "Age is " + temp[randomNumber].age;
        firstList.push(temp[randomNumber]);
        localStorage.setItem("firstlist", JSON.stringify(firstList));
        temp.splice(randomNumber, 1);
        console.log(firstList);

        count = parseInt(localStorage.getItem("count"));
        count--;
        localStorage.setItem("count", count);
        document.getElementById("count").innerHTML =
          localStorage.getItem("count");
        console.log(localStorage.getItem("count"));
      }
    }
  </script>
</html>
